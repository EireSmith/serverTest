<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Student Database</title>
  
<script>
      let show=()=>{
        let tab=document.getElementById('tab1');
        let rows=tab1.getElementsByClassName('tabRow');
        fetch('https://robert.dbsprojects.ie:8080/')
          .then(response => response.json())
          .then(data => data.Results.forEach(
            x=>{
              let newRow=rows[0].cloneNode(true);
              let divs=newRow.getElementsByTagName('td');
              divs[0].innerHTML=x['ID'];
              divs[1].innerHTML=x['Name'];
              divs[2].innerHTML=x['Email'];
              tab1.appendChild(newRow);
            }
          )
        );
      }
      
      baseURL = 'https://robert.dbsprojects.ie:8080/'

      let deleteStudent=()=>{
        let delButton = document.getElementById("delb");
        let inputId=document.getElementById('id').value;
        fetch(baseURL+'delete?id='+inputId).then((resp)=>{alert("Student Deleted")});
          }

      let updateStudent=()=>{
        let delButton = document.getElementById("updb");
        let inputName=document.getElementById('name').value;
        let inputEmail=document.getElementById('email').value;
        let inputId=document.getElementById('id').value;
        fetch(baseURL+'update?id='+inputId+'&name='+inputName'&email='+inputEmail).then((resp)=>{alert("Student Updated")});
         }
      
</script>
</head>
  
  
<body>
  
  <div id = "tabDiv">    
    <table id='tab1'>
      <tr id = 'tabHead'>
        <th>ID</th><th>Name</th> <th>Email</th>         
      </tr>
      <tr class="tabRow">
        <td ></td><td></td><td></td>         
      </tr>

    </table>
  </div>
  <BR/>
  <div>
    <label>ID: </label>
    <input id="id" type="text" placeholder="Enter ID">
    <label>Name: </label>
    <input id ="name" type="text" placeholder="Enter Name">
    <label>Email: </label>
    <input id ="email" type="text" placeholder="Enter Email">
  <BR/>
  </div>
  <div class='buttonDiv'>
    <div class ='button'>
        <button id='addb'> Add</button>
        <button id='updb' onClick="updateStudent()"> Update</button>
        <button  id="delb" onClick="deleteStudent()"> Delete</button>
        <button onClick="show()"> Show</button>
    </div>
  </div>
  
</body>
  

</html>